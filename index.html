<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>å» å•† x KOL æŠ½ç±¤å·¥å…·</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1d4ed8 0, #020617 45%, #000 100%);
      color: #e5e7eb;
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    .app {
      background: rgba(15, 23, 42, 0.95);
      border-radius: 24px;
      padding: 28px 28px 24px;
      max-width: 720px;
      width: 100%;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .tag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 12px;
      background: #22c55e22;
      border: 1px solid #22c55e;
      color: #bbf7d0;
      margin-bottom: 12px;
    }

    h1 {
      margin: 0 0 6px;
      font-size: 24px;
    }

    .subtitle {
      margin: 0 0 18px;
      font-size: 14px;
      color: #9ca3af;
    }

    .section-title {
      font-size: 15px;
      margin: 18px 0 8px;
      font-weight: 600;
      color: #e5e7eb;
    }

    .vendor-list {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .vendor-btn {
      flex: 1 1 0;
      min-width: 90px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      font-size: 14px;
      cursor: pointer;
      text-align: center;
      transition: all 0.15s ease;
    }

    .vendor-btn:hover:not(.locked):not(.active) {
      background: #111827;
      border-color: #60a5fa;
    }

    .vendor-btn.active {
      border-color: #38bdf8;
      background: linear-gradient(135deg, #0f172a, #082f49);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.3);
    }

    .vendor-btn.locked {
      border-color: #22c55e;
      background: linear-gradient(135deg, #022c22, #064e3b);
      color: #bbf7d0;
      cursor: default;
      opacity: 0.9;
    }

    .current-vendor {
      font-size: 14px;
      margin-top: 8px;
      color: #e5e7eb;
    }

    .current-vendor span {
      color: #38bdf8;
      font-weight: 600;
    }

    .actions {
      margin-top: 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    #drawButton {
      padding: 10px 18px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #0ea5e9, #22c55e);
      color: #020617;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(34, 197, 94, 0.35);
      transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.15s ease;
    }

    #drawButton:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow: 0 14px 30px rgba(34, 197, 94, 0.45);
    }

    #drawButton:disabled {
      opacity: 0.4;
      cursor: default;
      box-shadow: none;
    }

    .message {
      font-size: 13px;
      color: #e5e7eb;
      min-height: 18px;
    }

    .message strong {
      color: #facc15;
    }

    .message-success {
      color: #4ade80;
    }

    .message-error {
      color: #f97373;
    }

    .results {
      margin-top: 18px;
      border-radius: 16px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 12px 14px 10px;
    }

    .results-title {
      font-size: 14px;
      margin: 0 0 8px;
      color: #9ca3af;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    th, td {
      padding: 6px 4px;
      text-align: left;
    }

    th {
      font-weight: 600;
      border-bottom: 1px solid #4b5563;
      color: #e5e7eb;
    }

    tr:nth-child(odd) td {
      background: rgba(15, 23, 42, 0.6);
    }

    tr:nth-child(even) td {
      background: rgba(15, 23, 42, 0.3);
    }

    .kol-empty {
      color: #6b7280;
      font-style: italic;
    }

    .kol-name {
      font-weight: 600;
      color: #bfdbfe;
    }

    .kol-time {
      color: #a5b4fc;
      font-size: 12px;
    }

    .footer-note {
      margin-top: 10px;
      font-size: 11px;
      color: #6b7280;
    }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid #6366f1;
      font-size: 11px;
      color: #c7d2fe;
      margin-left: 4px;
    }

    @media (max-width: 600px) {
      .app {
        padding: 20px 16px 16px;
      }

      h1 {
        font-size: 20px;
      }

      .vendor-btn {
        font-size: 13px;
        padding: 8px 10px;
      }

      #drawButton {
        width: 100%;
        justify-content: center;
        text-align: center;
      }

      .actions {
        flex-direction: column;
        align-items: stretch;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="tag">æŠ½ç±¤å°å·¥å…· âœ¨</div>
    <h1>å» å•† x KOL éš¨æ©Ÿé…å°</h1>
    <p class="subtitle">
      æµç¨‹ï¼šå…ˆé¸å» å•† â†’ æŒ‰ä¸‹ã€Œé–‹å§‹æŠ½ç±¤ã€â†’ ç³»çµ±æœƒå¾å‰©é¤˜çš„ KOL è£¡éš¨æ©ŸæŠ½ä¸€ä½ä¸¦é–å®šï¼Œä¸æœƒé‡è¤‡ã€‚
    </p>

    <!-- Step 1: é¸æ“‡å» å•† -->
    <div>
      <div class="section-title">1. è«‹å…ˆé¸æ“‡å» å•†</div>
      <div class="vendor-list">
        <button class="vendor-btn" data-vendor="ASUS">ASUS</button>
        <button class="vendor-btn" data-vendor="MSI">MSI</button>
        <button class="vendor-btn" data-vendor="ZOTAC">ZOTAC</button>
      </div>
      <div class="current-vendor" id="currentVendorText">
        å°šæœªé¸æ“‡å» å•†
      </div>
    </div>

    <!-- Step 2: æŠ½ç±¤ -->
    <div class="actions">
      <button id="drawButton">é–‹å§‹æŠ½ç±¤</button>
      <div id="message" class="message"></div>
    </div>

    <!-- Step 3: æŠ½ç±¤çµæœ -->
    <div class="results">
      <p class="results-title">
        3. æŠ½ç±¤çµæœ
        <span class="badge">æ¯ä½ KOL åªæœƒè¢«æŠ½åˆ°ä¸€æ¬¡</span>
      </p>
      <table>
        <thead>
          <tr>
            <th style="width: 25%;">å» å•†</th>
            <th style="width: 50%;">KOL</th>
            <th style="width: 25%;">æ™‚æ®µ</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ASUS</td>
            <td id="kol-ASUS" class="kol-empty">å°šæœªæŠ½ç±¤</td>
            <td id="time-ASUS" class="kol-empty">â€”</td>
          </tr>
          <tr>
            <td>MSI</td>
            <td id="kol-MSI" class="kol-empty">å°šæœªæŠ½ç±¤</td>
            <td id="time-MSI" class="kol-empty">â€”</td>
          </tr>
          <tr>
            <td>ZOTAC</td>
            <td id="kol-ZOTAC" class="kol-empty">å°šæœªæŠ½ç±¤</td>
            <td id="time-ZOTAC" class="kol-empty">â€”</td>
          </tr>
        </tbody>
      </table>
      <div class="footer-note">
        KOL åå–®ï¼šA. 12:45â€“13:15 JoJo ï¼ B. 15:15â€“15:45 ç­ ç†¹ ï¼ C. 16:30â€“17:00 è˜‹è˜‹
      </div>
    </div>
  </div>

  <script>
    // å» å•†æ¸…å–®
    const vendors = ["ASUS", "MSI", "ZOTAC"];

    // KOL æ¸…å–®ï¼ˆæœƒè¢«éš¨æ©Ÿåˆ†é…ï¼Œæ¯ä½åªæœƒç”¨ä¸€æ¬¡ï¼‰
    const kolPool = [
      { id: "A", name: "JoJo", time: "12:45â€“13:15" },
      { id: "B", name: "ç­ ç†¹", time: "15:15â€“15:45" },
      { id: "C", name: "è˜‹è˜‹", time: "16:30â€“17:00" }
    ];

    let remainingKOLs = [...kolPool]; // é‚„æ²’è¢«æŠ½èµ°çš„ KOL
    const assignments = {};           // å» å•† -> KOL é…å°çµæœ
    let currentVendor = null;         // ç›®å‰é¸ä¸­çš„å» å•†

    const vendorButtons = document.querySelectorAll(".vendor-btn");
    const drawButton = document.getElementById("drawButton");
    const messageEl = document.getElementById("message");
    const currentVendorText = document.getElementById("currentVendorText");

    // æ›´æ–°è¨Šæ¯é¡¯ç¤º
    function setMessage(text, type = "") {
      messageEl.textContent = text;
      messageEl.classList.remove("message-success", "message-error");
      if (type === "success") {
        messageEl.classList.add("message-success");
      } else if (type === "error") {
        messageEl.classList.add("message-error");
      }
    }

    // æ›´æ–°ç›®å‰é¸æ“‡å» å•†æ–‡å­—
    function updateCurrentVendorText() {
      if (!currentVendor) {
        currentVendorText.textContent = "å°šæœªé¸æ“‡å» å•†";
      } else {
        currentVendorText.innerHTML = `ç›®å‰é¸æ“‡çš„å» å•†ï¼š<span>${currentVendor}</span>`;
      }
    }

    // é»é¸å» å•†æŒ‰éˆ•
    vendorButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const vendor = btn.dataset.vendor;

        // å¦‚æœé€™å€‹å» å•†å·²ç¶“æŠ½é KOLï¼Œå°±ä¸å…è¨±é‡æ–°æŠ½
        if (assignments[vendor]) {
          const assigned = assignments[vendor];
          setMessage(
            `${vendor} å·²ç¶“æŠ½åˆ° KOLï¼š${assigned.name}ï¼ˆ${assigned.time}ï¼‰ï¼Œç„¡æ³•é‡æ–°æŠ½ç±¤ã€‚`,
            "error"
          );
          return;
        }

        currentVendor = vendor;

        // UI ä¸Šé«˜äº®ç¾åœ¨é¸ä¸­çš„å» å•†
        vendorButtons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");

        updateCurrentVendorText();
        setMessage(`å·²é¸æ“‡ ${vendor}ï¼Œè«‹æŒ‰ã€Œé–‹å§‹æŠ½ç±¤ã€ã€‚`);
      });
    });

    // æŠ½ç±¤é‚è¼¯
    drawButton.addEventListener("click", () => {
      // 1. ç¢ºèªæœ‰é¸å» å•†
      if (!currentVendor) {
        setMessage("è«‹å…ˆé¸æ“‡ä¸€å€‹å» å•†å†æŒ‰æŠ½ç±¤ã€‚", "error");
        return;
      }

      // 2. æª¢æŸ¥é€™å€‹å» å•†æ˜¯å¦å·²ç¶“æŠ½é
      if (assignments[currentVendor]) {
        const assigned = assignments[currentVendor];
        setMessage(
          `${currentVendor} å·²ç¶“æŠ½åˆ° KOLï¼š${assigned.name}ï¼ˆ${assigned.time}ï¼‰ï¼Œç„¡æ³•é‡æ–°æŠ½ç±¤ã€‚`,
          "error"
        );
        return;
      }

      // 3. æª¢æŸ¥æ˜¯å¦é‚„æœ‰å‰©é¤˜ KOL
      if (remainingKOLs.length === 0) {
        setMessage("æ‰€æœ‰ KOL éƒ½å·²è¢«åˆ†é…å®Œç•¢ã€‚", "error");
        return;
      }

      // 4. éš¨æ©Ÿå¾ remainingKOLs æŠ½ä¸€ä½
      const randomIndex = Math.floor(Math.random() * remainingKOLs.length);
      const kol = remainingKOLs.splice(randomIndex, 1)[0]; // å¾ pool ç§»é™¤

      // 5. è¨˜éŒ„é…å°çµæœ
      assignments[currentVendor] = kol;

      // 6. æ›´æ–°çµæœè¡¨æ ¼
      const kolCell = document.getElementById(`kol-${currentVendor}`);
      const timeCell = document.getElementById(`time-${currentVendor}`);

      kolCell.classList.remove("kol-empty");
      timeCell.classList.remove("kol-empty");

      kolCell.innerHTML = `<span class="kol-name">${kol.name}</span>`;
      timeCell.innerHTML = `<span class="kol-time">${kol.time}</span>`;

      // 7. å°‡è©²å» å•†æŒ‰éˆ•æ¨™è¨˜ç‚ºå·²é–å®š
      const btn = Array.from(vendorButtons).find(
        (b) => b.dataset.vendor === currentVendor
      );
      if (btn) {
        btn.classList.remove("active");
        btn.classList.add("locked");
        btn.disabled = true;
      }

      setMessage(
        `${currentVendor} æŠ½åˆ°çš„ KOL æ˜¯ï¼š${kol.name}ï¼ˆ${kol.time}ï¼‰ğŸ‰`,
        "success"
      );

      // 8. å¦‚æœ KOL å…¨éƒ¨æŠ½å®Œï¼Œé—œé–‰æŠ½ç±¤æŒ‰éˆ•
      if (remainingKOLs.length === 0) {
        drawButton.disabled = true;
        setMessage("æŠ½ç±¤å®Œæˆï¼æ‰€æœ‰å» å•†éƒ½å·²ç¶å®š KOL âœ…", "success");
        currentVendor = null;
        updateCurrentVendorText();
      }
    });

    // ä¸€é–‹å§‹å…ˆæ¸…ç©ºè¨Šæ¯
    setMessage("");
    updateCurrentVendorText();
  </script>
</body>
</html>
